<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Configuration Files · ZeppelinOS</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta property="og:title" content="Configuration Files · ZeppelinOS"/><meta property="og:type" content="website"/><meta property="og:url" content="https://docs.zeppelinos.org/index.html"/><meta property="og:description" content="ZeppelinOS&#x27;s CLI generates `json` files where it stores the configuration of your project."/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/img/favicon.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-102575245-1', 'auto');
              ga('send', 'pageview');
            </script><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"/><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:100,200,300,400,500,700,400italic,700italic"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" href="/css/main.css"/></head><body class="sideNavVisible doc"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/logo.svg" alt="ZeppelinOS"/><h2 class="headerTitleWithLogo">ZeppelinOS</h2></a><a href="/versions.html"><h3>next</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/next/start.html" target="_self">Quickstart</a></li><li class=""><a href="/docs/next/apis.html" target="_self">Reference</a></li><li class=""><a href="https://blog.zeppelinos.org" target="_self">Blog</a></li><li class=""><a href="https://github.com/zeppelinos" target="_self">GitHub</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>ADVANCED TOPICS</span></h2></div><div class="navGroups"><div class="navGroup navGroupActive"><h3>OVERVIEW</h3><ul><li class="navListItem"><a class="navItem" href="/docs/next/start.html">ZeppelinOS</a></li><li class="navListItem"><a class="navItem" href="/docs/next/new_2.html">What&#x27;s new in ZeppelinOS 2.0</a></li></ul></div><div class="navGroup navGroupActive"><h3>QUICKSTART</h3><ul><li class="navListItem"><a class="navItem" href="/docs/next/deploying.html">Deploying your first project</a></li><li class="navListItem"><a class="navItem" href="/docs/next/upgrading.html">Upgrading your project</a></li><li class="navListItem"><a class="navItem" href="/docs/next/linking.html">Linking to EVM packages</a></li><li class="navListItem"><a class="navItem" href="/docs/next/publishing.html">Publishing an EVM package</a></li></ul></div><div class="navGroup navGroupActive"><h3>GUIDES</h3><ul><li class="navListItem"><a class="navItem" href="/docs/next/writing_contracts.html">Writing upgradeable contracts</a></li><li class="navListItem"><a class="navItem" href="/docs/next/testing.html">Testing</a></li><li class="navListItem"><a class="navItem" href="/docs/next/erc20_onboarding.html">erc20_onboarding</a></li><li class="navListItem"><a class="navItem" href="/docs/next/upgradeability_governance.html">Upgradeability governance</a></li><li class="navListItem"><a class="navItem" href="/docs/next/zos_lib.html">Using the ZeppelinOS programmatic library</a></li></ul></div><div class="navGroup navGroupActive"><h3>ADVANCED TOPICS</h3><ul><li class="navListItem navListItemActive"><a class="navItem navItemActive" href="/docs/next/configuration.html">Configuration Files</a></li><li class="navListItem"><a class="navItem" href="/docs/next/architecture.html">Contracts Architecture</a></li><li class="navListItem"><a class="navItem" href="/docs/next/pattern.html">The ZeppelinOS Upgrades Pattern</a></li><li class="navListItem"><a class="navItem" href="/docs/next/whitepaper.html">Whitepaper</a></li></ul></div></div></section></div><script>
          var toggler = document.getElementById('navToggler');
          var nav = document.getElementById('docsNav');
          toggler.onclick = function() {
            nav.classList.toggle('docsSliderActive');
          };
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1>Configuration Files</h1></header><article><div><span><p>ZeppelinOS's CLI generates <code>json</code> files where it stores the configuration of your project.</p>
<h2><a class="anchor" aria-hidden="true" id="zosjson"></a><a href="#zosjson" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>zos.json</code></h2>
<p>The first file stores the general configuration and is created by the <code>zos init</code> command. It has the following structure:</p>
<pre><code class="hljs css json">{
  "name": &lt;projectName&gt;
  "version": &lt;version&gt;
  "contracts": {
    &lt;contract-1-alias&gt;: &lt;contract-1-name&gt;,
    &lt;contract-2-alias&gt;: &lt;contract-2-name&gt;,
    ...
    &lt;contract-N-alias&gt;: &lt;contract-N-name&gt;
  },
  "stdlib": {
    "name": &lt;stdlibName&gt;
  }
}
</code></pre>
<p>Here, <code>&lt;projectName&gt;</code> is the name of the project, and <code>&lt;version&gt;</code> is the current version number. Once you start adding your contracts via <code>zos add</code>, they will be recorded under the <code>&quot;contracts&quot;</code> field, with the contract aliases as the keys (which default to the contract names), and the contract names as the values. Finally, if you link an <code>stdlib</code> with <code>zos link</code>, this will be reflected in the <code>&quot;stdlib&quot;</code> field, where <code>&lt;stdlibName&gt;</code> is the name of the linked <code>EVM Package</code>.</p>
<h2><a class="anchor" aria-hidden="true" id="zos-network-json"></a><a href="#zos-network-json" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>zos.&lt;network&gt;.json</code></h2>
<p>ZeppelinOS will also generate a file for each of the networks you work on (<code>local</code>, <code>ropsten</code>, <code>live</code>, ... These should be configured <a href="http://truffleframework.com/docs/advanced/configuration#networks">in your <code>truffle.js</code> file</a>, but note that <code>zos init</code> already configures the <code>local</code> network, which can be run by <code>npx truffle develop</code>). These files share the same structure:</p>
<pre><code class="hljs css json">{
  "contracts": {
    &lt;contract-1-name&gt;: {
      "address": &lt;contract-1-address&gt;,
      "bytecodeHash": &lt;contract-1-hash&gt;
    },
    &lt;contract-2-name&gt;: {
      "address": &lt;contract-2-address&gt;,
      "bytecodeHash": &lt;contract-2-hash&gt;
    },
    ...
    &lt;contract-N-name&gt;: {
      "address": &lt;contract-N-address&gt;,
      "bytecodeHash": &lt;contract-N-hash&gt;
    }
  },
  "proxies": {
    &lt;contract-1-name&gt;: [
        {
          "address": &lt;proxy-1-address&gt;,
          "version": &lt;proxy-1-version&gt;,
          "implementation": &lt;implementation-1-address&gt;
        }
      ],
      &lt;contract-2-name&gt;: [
        {
          "address": &lt;proxy-2-address&gt;,
          "version": &lt;proxy-2-version&gt;,
          "implementation": &lt;implementation-2-address&gt;
        }
      ],
      ...
      &lt;contract-N-name&gt;: [
        {
          "address": &lt;proxy-N-address&gt;,
          "version": &lt;proxy-N-version&gt;,
          "implementation": &lt;implementation-N-address&gt;
        }
      ]
  },
  "app": {
    "address": &lt;app-address&gt;
  },
  "version": &lt;app-version&gt;,
  "package": {
    "address": &lt;package-address&gt;
  },
  "provider": {
    "address": &lt;provider-address&gt;
  },
  "stdlib": {
    "address": &lt;stdlib-address&gt;,
    ["customDeploy": &lt;custom-deploy&gt;]
    "name": &lt;stdlib-name&gt;
  }
}
</code></pre>
<p>The most important thing to see here are the proxies and contracts' addresses, <code>&lt;proxy-i-address&gt;</code> and <code>&lt;contract-i-address&gt;</code> respectively. What will happen is that each time you upgrade your contracts, <code>&lt;contract-i-address&gt;</code> will change, reflecting the underlying logic contract change. The proxy addresses, however, will stay the same, so you can interact seamlessly with the same addresses as if no change had taken place. Note that <code>&lt;implementation-i-address&gt;</code> will normally point to the current contract address <code>&lt;contract-i-address&gt;</code>. Finally, <code>&lt;contract-i-hash&gt;</code> stores a SHA256 hash of the contract bytecode.</p>
<p>Another thing to notice in these files are the version numbers. The <code>&lt;appVersion&gt;</code> keeps track of the latest app version, and matches <code>&lt;version&gt;</code> from <code>zos.json</code>. The <code>&lt;proxy-i-version&gt;</code>s, on the other hand, keep track of which version of the contracts the proxies are pointing to. Say you deploy a contract in your app version 1.0, and then bump the version to 1.1 and push some upgraded code for that same contract. This will be reflected in the <code>&lt;contract-i-address&gt;</code>, but not yet in the proxy, which will display 1.0 in <code>&lt;proxy-i-version&gt;</code> and the old logic contract address in <code>&lt;implementation-i-address&gt;</code>. Once you run <code>zos update</code> to your contract, <code>&lt;proxy-i-version&gt;</code> will show the new 1.1 version, and <code>&lt;implementation-i-address&gt;</code> will point to the new <code>&lt;contract-i-address&gt;</code>.</p>
<p>Also, notice the fields <code>&lt;app&gt;</code> and <code>&lt;package&gt;</code>. These contain the addresses of contracts that ZeppelinOS uses to facilitate the creation of proxies and the management of different versions of your contracts. These contracts will only be deployed once you publish your project to a desired network. That is, your project will not have an <code>app</code> or <code>package</code> unless explicitly running the <code>publish</code> command. Note that this step is required for projects that produce an EVM package. To read more about the architecture of contracts we are using to publish your project on-chain please refer to the <a href="https://docs.zeppelinos.org/docs/architecture.html">Contract Architecture</a> section.</p>
<p>Finally, the <code>stdlib</code> field stores information about linked EVM packages. Its address is stored in <code>&lt;stdlib-address&gt;</code>, and its name in <code>&lt;stdlib-name&gt;</code>, matching that in <code>zos.json</code>. The <code>custom-deploy</code> field will be present only when a version of the EVM package is deployed using the <code>--deploy-libs</code> flag of the <code>push</code> command, in which case <code>&lt;custom-deploy&gt;</code> will be <code>true</code>. The remaining addresses, <code>&lt;app-address&gt;</code>, <code>&lt;package-address&gt;</code>, and <code>&lt;provider-address&gt;</code> store the addresses of the <code>App</code>, the <code>Package</code>, and the current <code>ImplementationProvider</code> respectively.</p>
<p>The naming of the file will be <code>zos.&lt;network&gt;.json</code>, but note that <code>&lt;network&gt;</code> is not taken from the name of the network's entry in the Truffle configuration file, but is instead inferred from the cannonical network id associated to the entry. For example, if the Truffle cofiguration file defines the following networks:</p>
<pre><code class="hljs css json">networks: {
   geth_ropsten: {
    host: 'localhost',
    port: 8555,
    network_id: 3
  },
   parity_ropsten: {
    host: 'localhost',
    port: 8565,
    network_id: 3
  },
   local: {
    host: 'localhost',
    port: 8545,
    network_id: *
  }
 }
</code></pre>
<p>Using <code>zos push --network geth_ropsten</code> or <code>zos push --network parity_ropsten</code> will both produce a file named <code>zos.ropsten.json</code> no matter which method was used to connect to the ropsten network. ZeppelinOS will automatically detect which public network is being referred to (using web3.network.getVersion()) and use this information for determining the file name.
When dealing with local networks, ZeppelinOS will generate files with <code>dev-&lt;network_id&gt;</code>, given that these networks are not public and don't have a cannonical name. Using <code>zos push --network local</code> will produce a file named <code>zos.dev-1540303312049.json</code> (or some other number representing the network id of the local network).</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="zos_lib.html">← Using the ZeppelinOS programmatic library</a><a class="docs-next button" href="architecture.html">Contracts Architecture →</a></div></div></div></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/symbol-zeppelin.png" alt="ZeppelinOS" width="66" height="58"/></a><div><h5>Docs</h5><a href="/docs/start.html">Guides</a><a href="/docs/apis.html">Reference</a></div><div><h5>More</h5><a href="https://zeppelinos.org">Main Site</a><a href="https://blog.zeppelinos.org">Blog</a><a href="https://github.com/zeppelinos">GitHub</a></div></section><a href="https://zeppelinos.org" target="_blank" class="fbOpenSource"><img src="/img/logo.svg" alt="ZeppelinOS" width="170" height="45"/></a><section class="copyright">Copyright © 2017-present ZeppelinOS Global</section><section class="report-bugs"><a href="https://github.com/zeppelinos/zos/issues/new?labels=kind:documentation">Report a bug on this site</a></section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
              var search = docsearch({
                
                apiKey: '8d0b5afbba49947d9efb5659d1b08df7',
                indexName: 'zeppelinos',
                inputSelector: '#search_input_react',
                algoliaOptions: {}
              });
            </script></body></html>